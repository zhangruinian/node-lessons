webpackJsonp([7],{536:function(e,t,s){s(730);var a=s(58)(s(713),s(741),"data-v-1bf9644c",null);e.exports=a.exports},713:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(88),n=function(e){return e&&e.__esModule?e:{default:e}}(a),o=s(133);t.default={data:function(){return{token:localStorage.getItem("token"),users:[],listLoading:!1,addFormVisible:!1,addLoading:!1,addFormRules:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}]},addForm:{user:"",password:""}}},methods:{getUsers:function(){var e=this;this.listLoading=!0,(0,o.getUserList)({token:this.token}).then(function(t){e.users=t.data.data,console.log(t.data),e.listLoading=!1})},handleDel:function(e,t){var s=this;this.$confirm("确认删除该用户吗?","删除",{type:"warning"}).then(function(){s.listLoading=!0;var e={u_id:t.u_id,token:s.token};(0,o.deletUser)(e).then(function(e){s.listLoading=!1,s.$message({message:"删除成功",type:"success"}),console.log(e),s.getUsers()})}).catch(function(){})},handleReset:function(e,t){var s=this;this.$confirm("确认重置密码吗?","提示",{type:"warning"}).then(function(){(0,o.resetPwd)({token:s.token,u_id:t.u_id}).then(function(e){s.$message({type:"success",message:"重置成功"})}).catch()})},handleAdd:function(){this.addFormVisible=!0,this.addForm={user:"",password:""}},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){if(t){e.addLoading=!0;var s=(0,n.default)({},e.addForm,{token:e.token});(0,o.addUser)(s).then(function(t){e.addLoading=!1,e.$message({message:"添加成功",type:"success"}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getUsers()})}})},handleAddAdmin:function(e,t){var s=this;this.$confirm("确认设置为管理员吗?","提示",{type:"warning"}).then(function(){(0,o.addAdmin)({token:s.token,u_id:t.u_id}).then(function(e){"success"==e.msg&&s.$message({type:"success",message:"设为管理员成功"}),1==e.data.isAdmin&&s.$message({type:"success",message:"已经是管理员"})})})}},created:function(){this.getUsers()}}},719:function(e,t,s){t=e.exports=s(524)(),t.push([e.i,"section.user .toolbar[data-v-1bf9644c]{margin:10px 0}section.user .list-table[data-v-1bf9644c]{width:562px}","",{version:3,sources:["C:/front-end/vue/sz-monitor-front/src/views/user-admin/admin.vue"],names:[],mappings:"AACA,uCACE,aAAe,CAChB,AACD,0CACE,WAAa,CACd",file:"admin.vue",sourcesContent:["\nsection.user .toolbar[data-v-1bf9644c] {\n  margin: 10px 0;\n}\nsection.user .list-table[data-v-1bf9644c] {\n  width: 562px;\n}\n"],sourceRoot:""}])},730:function(e,t,s){var a=s(719);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(525)("4ee27ad6",a,!0)},741:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"user"},[s("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[s("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"list-table",attrs:{data:e.users,"highlight-current-row":""}},[s("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{prop:"user",label:"用户名",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{label:"权限",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isAdmin?s("el-tag",{attrs:{type:"success"}},[e._v("管理员")]):e._e(),e._v(" "),t.row.isAdmin?e._e():s("el-tag",[e._v("普通用户")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small"},on:{click:function(s){e.handleReset(t.$index,t.row)}}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(s){e.handleDel(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){e.handleAddAdmin(t.$index,t.row)}}},[e._v("设为管理员")])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:"新增","close-on-click-modal":!1,size:"tiny"},model:{value:e.addFormVisible,callback:function(t){e.addFormVisible=t},expression:"addFormVisible"}},[s("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.user,callback:function(t){e.addForm.user=t},expression:"addForm.user"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.password,callback:function(t){e.addForm.password=t},expression:"addForm.password"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",slot:"footer"},[s("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.addSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=7.ee28edd3a74d73608325.js.map